{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport weatherAPI from \"../../api\";\nconst sliceName = \"weather\";\nexport const fetchCurrentWeather = createAsyncThunk(`${sliceName}/fetchCurrentWeather`, city => weatherAPI.fetchCurrentWeather({\n  query: city\n}));\nexport const fetchWeatherForecast = createAsyncThunk(`${sliceName}/fetchWeatherForecast`, ({\n  lat,\n  lon\n}) => weatherAPI.fetchWeatherForecast({\n  lat,\n  lon\n}));\nexport const weatherSlice = createSlice({\n  name: sliceName,\n  initialState: {\n    current: null,\n    forecast: null,\n    loading: true,\n    error: null\n  },\n  reducers: {\n    setCurrent: (state, action) => {\n      state.current = action.payload;\n    },\n    setError: (state, action) => {\n      state.error = action.payload;\n    }\n  },\n  extraReducers: {\n    [fetchCurrentWeather.pending]: (state, {\n      payload,\n      meta\n    }) => {\n      state.loading = true;\n    },\n    [fetchCurrentWeather.fulfilled]: (state, {\n      payload,\n      meta\n    }) => {\n      state.loading = false;\n      state.error = null;\n      state.current = payload.data;\n    },\n    [fetchCurrentWeather.rejected]: (state, {\n      error,\n      meta\n    }) => {\n      state.loading = false;\n      state.error = error;\n    },\n    [fetchWeatherForecast.pending]: (state, {\n      payload,\n      meta\n    }) => {\n      state.loading = true;\n    },\n    [fetchWeatherForecast.fulfilled]: (state, {\n      payload,\n      meta\n    }) => {\n      state.loading = false; //Remove today and show only next 5 forecast\n\n      state.forecast = payload.data.daily.filter((item, index) => index > 0 && index < 6);\n    },\n    [fetchWeatherForecast.rejected]: (state, {\n      error,\n      meta\n    }) => {\n      state.loading = false;\n    }\n  }\n});\nexport const {\n  actions: weatherAction,\n  reducer: weatherReducer\n} = weatherSlice;\nexport default weatherSlice.reducer;","map":{"version":3,"sources":["/Users/mayk/Downloads/weather-widget/src/features/weather/weatherSlice.js"],"names":["createSlice","createAsyncThunk","weatherAPI","sliceName","fetchCurrentWeather","city","query","fetchWeatherForecast","lat","lon","weatherSlice","name","initialState","current","forecast","loading","error","reducers","setCurrent","state","action","payload","setError","extraReducers","pending","meta","fulfilled","data","rejected","daily","filter","item","index","actions","weatherAction","reducer","weatherReducer"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,gBAAtB,QAA8C,kBAA9C;AAEA,OAAOC,UAAP,MAAuB,WAAvB;AAEA,MAAMC,SAAS,GAAG,SAAlB;AAEA,OAAO,MAAMC,mBAAmB,GAAGH,gBAAgB,CAC9C,GAAEE,SAAU,sBADkC,EAE9CE,IAAD,IAAUH,UAAU,CAACE,mBAAX,CAA+B;AAAEE,EAAAA,KAAK,EAAED;AAAT,CAA/B,CAFqC,CAA5C;AAKP,OAAO,MAAME,oBAAoB,GAAGN,gBAAgB,CAC/C,GAAEE,SAAU,uBADmC,EAEhD,CAAC;AAAEK,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAD,KAAkBP,UAAU,CAACK,oBAAX,CAAgC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAhC,CAF8B,CAA7C;AAKP,OAAO,MAAMC,YAAY,GAAGV,WAAW,CAAC;AACpCW,EAAAA,IAAI,EAAER,SAD8B;AAEpCS,EAAAA,YAAY,EAAE;AACVC,IAAAA,OAAO,EAAE,IADC;AAEVC,IAAAA,QAAQ,EAAE,IAFA;AAGVC,IAAAA,OAAO,EAAE,IAHC;AAIVC,IAAAA,KAAK,EAAE;AAJG,GAFsB;AAQpCC,EAAAA,QAAQ,EAAE;AACNC,IAAAA,UAAU,EAAE,CAACC,KAAD,EAAOC,MAAP,KAAkB;AAC1BD,MAAAA,KAAK,CAACN,OAAN,GAAgBO,MAAM,CAACC,OAAvB;AACH,KAHK;AAINC,IAAAA,QAAQ,EAAE,CAACH,KAAD,EAAOC,MAAP,KAAkB;AACxBD,MAAAA,KAAK,CAACH,KAAN,GAAcI,MAAM,CAACC,OAArB;AACH;AANK,GAR0B;AAgBpCE,EAAAA,aAAa,EAAE;AACX,KAACnB,mBAAmB,CAACoB,OAArB,GAA+B,CAACL,KAAD,EAAQ;AAAEE,MAAAA,OAAF;AAAWI,MAAAA;AAAX,KAAR,KAA8B;AACzDN,MAAAA,KAAK,CAACJ,OAAN,GAAgB,IAAhB;AACH,KAHU;AAIX,KAACX,mBAAmB,CAACsB,SAArB,GAAiC,CAACP,KAAD,EAAQ;AAAEE,MAAAA,OAAF;AAAWI,MAAAA;AAAX,KAAR,KAA8B;AAC3DN,MAAAA,KAAK,CAACJ,OAAN,GAAgB,KAAhB;AACAI,MAAAA,KAAK,CAACH,KAAN,GAAc,IAAd;AACAG,MAAAA,KAAK,CAACN,OAAN,GAAgBQ,OAAO,CAACM,IAAxB;AACH,KARU;AASX,KAACvB,mBAAmB,CAACwB,QAArB,GAAgC,CAACT,KAAD,EAAQ;AAAEH,MAAAA,KAAF;AAASS,MAAAA;AAAT,KAAR,KAA4B;AACxDN,MAAAA,KAAK,CAACJ,OAAN,GAAgB,KAAhB;AACAI,MAAAA,KAAK,CAACH,KAAN,GAAcA,KAAd;AACH,KAZU;AAaX,KAACT,oBAAoB,CAACiB,OAAtB,GAAgC,CAACL,KAAD,EAAQ;AAAEE,MAAAA,OAAF;AAAWI,MAAAA;AAAX,KAAR,KAA8B;AAC1DN,MAAAA,KAAK,CAACJ,OAAN,GAAgB,IAAhB;AACH,KAfU;AAgBX,KAACR,oBAAoB,CAACmB,SAAtB,GAAkC,CAACP,KAAD,EAAQ;AAAEE,MAAAA,OAAF;AAAWI,MAAAA;AAAX,KAAR,KAA8B;AAC5DN,MAAAA,KAAK,CAACJ,OAAN,GAAgB,KAAhB,CAD4D,CAE5D;;AACAI,MAAAA,KAAK,CAACL,QAAN,GAAiBO,OAAO,CAACM,IAAR,CAAaE,KAAb,CAAmBC,MAAnB,CAA0B,CAACC,IAAD,EAAMC,KAAN,KAAgBA,KAAK,GAAG,CAAR,IAAaA,KAAK,GAAG,CAA/D,CAAjB;AACH,KApBU;AAqBX,KAACzB,oBAAoB,CAACqB,QAAtB,GAAiC,CAACT,KAAD,EAAQ;AAAEH,MAAAA,KAAF;AAASS,MAAAA;AAAT,KAAR,KAA4B;AACzDN,MAAAA,KAAK,CAACJ,OAAN,GAAgB,KAAhB;AACH;AAvBU;AAhBqB,CAAD,CAAhC;AA2CP,OAAO,MAAO;AAAEkB,EAAAA,OAAO,EAAEC,aAAX;AAA0BC,EAAAA,OAAO,EAAEC;AAAnC,IAAsD1B,YAA7D;AAEP,eAAeA,YAAY,CAACyB,OAA5B","sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nimport weatherAPI from \"../../api\";\n\nconst sliceName = \"weather\";\n\nexport const fetchCurrentWeather = createAsyncThunk(\n    `${sliceName}/fetchCurrentWeather`,\n    (city) => weatherAPI.fetchCurrentWeather({ query: city })\n);\n\nexport const fetchWeatherForecast = createAsyncThunk(\n    `${sliceName}/fetchWeatherForecast`,\n    ({ lat, lon }) => weatherAPI.fetchWeatherForecast({ lat, lon })\n);\n\nexport const weatherSlice = createSlice({\n    name: sliceName,\n    initialState: {\n        current: null,\n        forecast: null,\n        loading: true,\n        error: null,\n    },\n    reducers: {\n        setCurrent: (state,action) => {\n            state.current = action.payload\n        },\n        setError: (state,action) => {\n            state.error = action.payload\n        }\n    },\n    extraReducers: {\n        [fetchCurrentWeather.pending]: (state, { payload, meta }) => {\n            state.loading = true;\n        },\n        [fetchCurrentWeather.fulfilled]: (state, { payload, meta }) => {\n            state.loading = false;\n            state.error = null;\n            state.current = payload.data;\n        },\n        [fetchCurrentWeather.rejected]: (state, { error, meta }) => {\n            state.loading = false;\n            state.error = error;\n        },\n        [fetchWeatherForecast.pending]: (state, { payload, meta }) => {\n            state.loading = true;\n        },\n        [fetchWeatherForecast.fulfilled]: (state, { payload, meta }) => {\n            state.loading = false;\n            //Remove today and show only next 5 forecast\n            state.forecast = payload.data.daily.filter((item,index) => index > 0 && index < 6);\n        },\n        [fetchWeatherForecast.rejected]: (state, { error, meta }) => {\n            state.loading = false;\n        },\n    },\n});\n\nexport const  { actions: weatherAction, reducer: weatherReducer } = weatherSlice\n\nexport default weatherSlice.reducer;"]},"metadata":{},"sourceType":"module"}